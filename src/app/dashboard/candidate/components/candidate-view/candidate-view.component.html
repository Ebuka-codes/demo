<div
  class="modal fade"
  #modalRoot
  id="viewCandidateModal"
  tabindex="-1"
  aria-labelledby="modalLabel"
  aria-hidden="true"
  data-bs-backdrop="static"
  data-bs-keyboard="false"
>
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">View Candidate</h5>
        <span class="close-icon" data-bs-dismiss="modal" (click)="close()">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-6"
            style="width: 20px"
          >
            <path
              fill-rule="evenodd"
              d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z"
              clip-rule="evenodd"
            />
          </svg>
        </span>
      </div>

      <div class="modal-body" *ngIf="candidateViewData">
        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Name</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{
              candidateViewData.name
                ? (candidateViewData.name | titlecase)
                : "N/A"
            }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Job Title</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{ candidateViewData.jobDetail.jobTitle | titlecase }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Job Type</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{ candidateViewData.jobDetail.jobType | titlecase }}</span>
          </div>
        </div>
        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Work Mode</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{ candidateViewData.jobDetail.workMode | titlecase }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Employment Type</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{
              candidateViewData.jobDetail.employmentType | titlecase
            }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Email Address</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{ candidateViewData.email || "N/A" }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Phone Number</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{ candidateViewData.phone || "N/A" }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>State</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{
              candidateViewData.state
                ? (candidateViewData.state | titlecase)
                : "N/A"
            }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>City/Province</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{
              candidateViewData.city
                ? (candidateViewData.city | titlecase)
                : "N/A"
            }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Address</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{
              candidateViewData.address
                ? (candidateViewData.address | titlecase)
                : "N/A"
            }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Current Status</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{ candidateViewData.status.slice(0, 9) | titlecase }}</span>
          </div>
        </div>

        <div class="form-group">
          <div class="col-sm-6 control-label form-control-static p-2">
            <label><strong>Schedule Date</strong></label>
          </div>
          <div
            class="col-sm-6 form-control-static p-2"
            style="word-wrap: break-word"
          >
            <span>{{
              candidateViewData.scheduledDate || "Not available"
            }}</span>
          </div>
        </div>
      </div>

      <div class="candidate-additional-info">
        <div class="work-history">
          <ngb-accordion #acc="ngbAccordion" activeIds="1">
            <ngb-panel [ngbCollapse]="true">
              <ng-template ngbPanelTitle>Work History</ng-template>
              <ng-template ngbPanelContent>
                <div *ngFor="let job of candidateViewData?.workHistories">
                  <p><strong>Job Title:</strong> {{ job.jobTitle }}</p>
                  <p><strong>Company Name:</strong> {{ job.companyName }}</p>
                  <p><strong>Start Date:</strong> {{ job.startDate }}</p>
                  <p><strong>End Date:</strong> {{ job.endDate }}</p>
                  <p><strong>Description:</strong> {{ job.jobDescription }}</p>
                  <hr />
                </div>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>
        <div class="education-history">
          <ngb-accordion #acc="ngbAccordion" activeIds="2">
            <ngb-panel>
              <ng-template ngbPanelTitle>Education History</ng-template>
              <ng-template ngbPanelContent>
                <div *ngFor="let item of candidateViewData?.educationHistories">
                  <p><strong>Degree:</strong> {{ item.degree }}</p>
                  <p>
                    <strong>Institution Name:</strong>
                    {{ item.institutionName }}
                  </p>
                  <p><strong>Major:</strong> {{ item.major }}</p>
                  <p>
                    <strong>Field of study:</strong> {{ item?.fieldOfStudy }}
                  </p>

                  <p>
                    <strong>Educational Level:</strong>
                    {{ item.educationLevel }}
                  </p>

                  <p>
                    <strong>Start Date:</strong>
                    {{ item.startDate }}
                  </p>
                  <p>
                    <strong>End Date:</strong>
                    {{ item.endDate }}
                  </p>
                  <hr />
                </div>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>

        <div class="skill-history">
          <ngb-accordion #acc="ngbAccordion" activeIds="3">
            <ngb-panel [ngbCollapse]="true">
              <ng-template ngbPanelTitle>Skill History</ng-template>
              <ng-template ngbPanelContent>
                <div *ngFor="let item of candidateViewData?.skills">
                  <p><strong>Skill Name:</strong> {{ item.skillName }}</p>
                  <p>
                    <strong>Proficiency Level:</strong>
                    {{ item.proficiencyLevel }}
                  </p>

                  <p>
                    <strong>Year of Experience:</strong> {{ item?.noOfYears }}
                  </p>

                  <hr />
                </div>

                <p *ngIf="!candidateViewData?.skills?.length">No record</p>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>

        <div
          class="question"
          *ngIf="candidateViewData?.questionAnswers?.length"
        >
          <ngb-accordion #acc="ngbAccordion" activeIds="3">
            <ngb-panel [ngbCollapse]="true">
              <ng-template ngbPanelTitle>Questions & Answers</ng-template>
              <ng-template ngbPanelContent>
                <div *ngFor="let item of candidateViewData?.questionAnswers">
                  <p>
                    <strong>Question</strong>:
                    {{ item?.questionOption?.description }}
                  </p>

                  <ng-container
                    *ngIf="item.questionOption.questionType === 'DROPDOWN'"
                    ><li><strong>Answer</strong> : {{ item?.answer }}</li>
                  </ng-container>

                  <ng-container
                    *ngIf="item?.questionOption?.questionType === 'TEXT'"
                    ><li><strong>Answer</strong>: {{ item?.answer }}</li>
                  </ng-container>

                  <ng-container
                    *ngIf="item?.questionOption?.questionType === 'DATE'"
                    ><li>
                      <strong>Answer</strong>: {{ formatDate(item.answer) }}
                    </li>
                  </ng-container>
                  <hr />
                </div>
              </ng-template>
            </ngb-panel>
          </ngb-accordion>
        </div>
      </div>

      <div class="action-btn">
        <div class="hire">
          <button
            (click)="hireCandidate(candidateViewData.id)"
            [disabled]="isHiring"
          >
            <ng-container *ngIf="isHiring; else content">
              <span class="mini-loader-spinner"></span>
            </ng-container>
            <ng-template #content>
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  d="M16 21V19C16 17.8954 15.1046 17 14 17H6C4.89543 17 4 17.8954 4 19V21"
                  stroke="#ffff"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <circle
                  cx="10"
                  cy="7"
                  r="4"
                  stroke="#fff"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
                <path
                  d="M17 10L19 12L22 9"
                  stroke="#ffff"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>

              Hire
            </ng-template>
          </button>
        </div>

        <div class="reject">
          <button
            (click)="rejectCandidate(candidateViewData.id)"
            [disabled]="isRejecting"
          >
            <ng-container *ngIf="isRejecting; else rejectContent">
              <span class="mini-loader-spinner"></span>
            </ng-container>
            <ng-template #rejectContent>
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <circle cx="12" cy="12" r="10"></circle>
                <line x1="4" y1="4" x2="20" y2="20"></line>
              </svg>

              Reject
            </ng-template>
          </button>
        </div>
        <div
          class="schedule-date"
          (click)="onScheduleDate(candidateViewData.id)"
        >
          <button>
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"
              />
            </svg>

            Schedule Date
          </button>
        </div>

        <div class="mail-btn" (click)="onMailCandidate()">
          <button>
            <svg
              width="18"
              height="18"
              viewBox="0 0 18 18"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                fill-rule="evenodd"
                clip-rule="evenodd"
                d="M9 0.75C6.81196 0.75 4.71354 1.61919 3.16637 3.16637C1.61919 4.71354 0.75 6.81196 0.75 9C0.75 11.188 1.61919 13.2865 3.16637 14.8336C4.71354 16.3808 6.81196 17.25 9 17.25H13.125C14.4065 17.25 15.0473 17.25 15.5523 17.041C15.8861 16.9028 16.1893 16.7002 16.4448 16.4448C16.7002 16.1893 16.9028 15.8861 17.041 15.5523C17.25 15.0473 17.25 14.4065 17.25 13.125V9C17.25 6.81196 16.3808 4.71354 14.8336 3.16637C13.2865 1.61919 11.188 0.75 9 0.75ZM5.33333 8.08333C5.33333 7.84022 5.42991 7.60706 5.60182 7.43515C5.77373 7.26324 6.00689 7.16667 6.25 7.16667H11.75C11.9931 7.16667 12.2263 7.26324 12.3982 7.43515C12.5701 7.60706 12.6667 7.84022 12.6667 8.08333C12.6667 8.32645 12.5701 8.55961 12.3982 8.73151C12.2263 8.90342 11.9931 9 11.75 9H6.25C6.00689 9 5.77373 8.90342 5.60182 8.73151C5.42991 8.55961 5.33333 8.32645 5.33333 8.08333ZM8.08333 11.75C8.08333 11.5069 8.17991 11.2737 8.35182 11.1018C8.52373 10.9299 8.75688 10.8333 9 10.8333H11.75C11.9931 10.8333 12.2263 10.9299 12.3982 11.1018C12.5701 11.2737 12.6667 11.5069 12.6667 11.75C12.6667 11.9931 12.5701 12.2263 12.3982 12.3982C12.2263 12.5701 11.9931 12.6667 11.75 12.6667H9C8.75688 12.6667 8.52373 12.5701 8.35182 12.3982C8.17991 12.2263 8.08333 11.9931 8.08333 11.75Z"
                fill="#FAFAFA"
              />
            </svg>

            Request More Info
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
